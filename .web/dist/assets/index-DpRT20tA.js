(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();class m{ctx;constructor(e=[],s=[]){this.ctx=canvas.getContext("2d"),this.shapeCoords=e,this.materialCoords=s}screen(e=.2){canvas.height=window.innerHeight*(1-e),canvas.width=window.innerWidth*(1-e),this.ctx.clearRect(0,0,canvas.width,canvas.height)}vertices(e,s="blue",i=5,t=2){const n=[];if(this.ctx.fillStyle=s,e.forEach(r=>{this.ctx.beginPath(),this.ctx.arc(r.x,r.y,i,0,Math.PI*2),this.ctx.fill()}),e.length>1){this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y);for(let r=1;r<e.length;r++)this.ctx.lineTo(e[r].x,e[r].y),n.push([e[r-1],e[r]]);this.ctx.strokeStyle=s,this.ctx.lineWidth=t,this.ctx.stroke()}return n}loop=()=>{this.screen();const e=this.vertices(this.shapeCoords,"red");this.vertices(this.materialCoords,"blue"),this.materialCoords.forEach(s=>{if(s.moving!==!1)for(let i=0;i<e.length;i++){const[t,n]=e[i],r=g(s,t,n);if(r!==!1&&r<6){s.moving=!1;break}}}),requestAnimationFrame(this.loop)}}function g(o,e,s){const i=s.x-e.x,t=s.y-e.y,n=o.x-e.x,r=o.y-e.y,l=i*i+t*t;if(l===0)return!1;const a=(n*i+r*t)/l;if(a<0||a>1)return!1;const u=e.x+a*i,d=e.y+a*t,h=o.x-u,f=o.y-d;return Math.sqrt(h*h+f*f)}class c{x;originalY;velX;velY;accX;accY;moving;constructor(e,s,i=!0){this.x=e,this.originalY=s,this.velX=0,this.velY=0,this.accX=0,this.accY=-9.81,this.moving=!i,i||this.beginMove()}beginMove(){let e=performance.now();const s=i=>{if(!this.moving)return;const t=i-e;e=i,this.velY+=this.accY*(t/1e3),this.originalY+=this.velY*(t/1e3),requestAnimationFrame(s)};requestAnimationFrame(s)}get y(){return canvas.height-this.originalY}set y(e){this.originalY=canvas.height-e}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("canvas");const o=new m,e=[new c(200,150),new c(300,150),new c(400,250),new c(500,320),new c(600,250)],s=[new c(300,200,!1),new c(350,300,!1),new c(400,350,!1),new c(480,400,!1),new c(500,400,!1),new c(600,400,!1)];o.screen(),o.shapeCoords=e,o.materialCoords=s,o.loop()});
